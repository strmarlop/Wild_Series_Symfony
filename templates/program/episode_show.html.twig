{% extends 'base.html.twig' %}

{% block title %}
	{{ program.title }}
{% endblock %}

{% block body %}
	<div class="media">
		<img class="align-self-start mr-3" src="{{ program.poster }}" alt="{{ program.title }} poster">
		<div class="media-body">
			<h1 class="mt-0">{{ program.title }}</h1>
			<h2>Saison #{{ season.number }}</h2>
			<h3>Episode #{{ episode.number }}
				-
				{{ episode.title }}</h3>
			<p>{{ episode.synopsis }}</p>
		</div>
	</div>

	{# {% if app.user %} #}
	{% if is_granted("ROLE_ADMIN") or is_granted("ROLE_CONTRIBUTOR") %}
		<h3>Rajouter un commentaire</h3>
		{{ form_start(form) }}
		{{ form_widget(form) }}
		<button class="btn">{{ button_label|default('Add comment') }}</button>
		{{ form_end(form) }}
	{% endif %}


	<strong>Comments :</strong>
	<ul>
		{% for comment in episode.comments %}
			<li>
				<p>Author:
					{{ comment.author.email }}</p>
				<p>Comment:
					{{ comment.comment }}</p>
				<p>Rate:
					{{ comment.rate }}</p>
			</li>
			{% if is_granted("ROLE_ADMIN") or app.user == comment.author %}
				{{ include('comment/_delete_form.html.twig') }}
			{% endif %}
			<br>
		{% endfor %}
	</ul>

	<a href="{{ path('program_index') }}">Retour à la liste des séries</a>
	<br>
	<a href="{{ path('category_index') }}">Retour à la liste de categories</a>

{% endblock %}
